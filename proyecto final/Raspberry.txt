# !/usr/bin/env python3

#!/usr/bin/env python3

# Main.py file generated by New Project wizard

# Created:   mar. ene. 18 2022
# Processor: RPI3
# Compiler:  Python 3 (Proteus)

# Modules
from goto import *
import time
import var
import pio
import resource

# Peripheral Configuration Code (do not edit)

import cpu
import FileStore
import VFP
import camera
import Controls
import RPi.GPIO as GPIO
def peripheral_setup () :
# Peripheral Constructors
 pio.cpu=cpu.CPU ()
 pio.storage=FileStore.FileStore ()
 pio.server=VFP.VfpServer ()
 pio.CAM1=camera.RPiCamera ()
 pio.IotPhoto1=Controls.Photo ("IotPhoto1", )
 pio.storage.begin ()
 pio.server.begin (0)
 GPIO.setmode(GPIO.BCM)
 pio.bt1=4
 GPIO.setup(pio.bt1, GPIO.IN, GPIO.PUD_DOWN)
# Install interrupt handlers

def peripheral_loop () :
 if GPIO.input(pio.bt1):
  pio.CAM1.capture(25)
  time.sleep(2)
  prueba=""
  prueba=pio.CAM1.getLastImage()
  pio.IotPhoto1.showImage(prueba)
  time.sleep(3)



# Main function
def main () :
# Setup
 peripheral_setup()
# Infinite loop
 while 1 :
  peripheral_loop()
  pass
# Command line execution
if _name_ == '_main_' :
   main()